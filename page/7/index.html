<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  




<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Code Chemistry" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="WORK HARD, PLAY HARD">
<meta property="og:type" content="website">
<meta property="og:title" content="Code Chemistry">
<meta property="og:url" content="http://yoursite.com/page/7/index.html">
<meta property="og:site_name" content="Code Chemistry">
<meta property="og:description" content="WORK HARD, PLAY HARD">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Code Chemistry">
<meta name="twitter:description" content="WORK HARD, PLAY HARD">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> Code Chemistry </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Code Chemistry</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/10/370-Convert-Expression-to-Reverse-Polish-Notation/" itemprop="url">
                  370 Convert Expression to Reverse Polish Notation
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-10T17:35:25+00:00" content="2015-10-10">
              2015-10-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LintCode/" itemprop="url" rel="index">
                    <span itemprop="name">LintCode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/10/370-Convert-Expression-to-Reverse-Polish-Notation/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/10/370-Convert-Expression-to-Reverse-Polish-Notation/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原题">原题</h1><blockquote>
<p>给定一个表达式字符串数组，返回该表达式的逆波兰表达式（即去掉括号）。</p>
</blockquote>
<p>对于 [3 - 4 + 5]的表达式（该表达式可表示为[“3”, “-“, “4”, “+”, “5”]），返回 [3 4 - 5 +]（该表达式可表示为 [“3”, “4”, “-“, “5”, “+”]）。</p>
<h1 id="解题思路">解题思路</h1><ul>
<li>首先建立表达式树，如题[Expression Tree Build]</li>
<li>Reverse Polish Notation即表达式树后序遍历的结果</li>
</ul>
<h1 id="完整代码">完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">expressionTreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, symbol)</span>:</span></span><br><span class="line">        self.symbol = symbol</span><br><span class="line">        self.left, self.right = <span class="keyword">None</span>, <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, val, s)</span>:</span></span><br><span class="line">        self.left = <span class="keyword">None</span></span><br><span class="line">        self.right = <span class="keyword">None</span></span><br><span class="line">        self.val = val</span><br><span class="line">        self.exp_node = expressionTreeNode(s)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># @param expression: A string list</span></span><br><span class="line">    <span class="comment"># @return: The Reverse Polish notation of this expression</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_val</span><span class="params">(self, a, base)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> a == <span class="string">'+'</span> <span class="keyword">or</span> a == <span class="string">'-'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span> + base</span><br><span class="line">        <span class="keyword">if</span> a == <span class="string">'*'</span> <span class="keyword">or</span> a == <span class="string">'/'</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span> + base</span><br><span class="line">        <span class="keyword">return</span> sys.maxint</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_tree</span><span class="params">(self, expression)</span>:</span></span><br><span class="line">        stack = []</span><br><span class="line">        base = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(expression)):</span><br><span class="line">            <span class="keyword">if</span> expression[i] == <span class="string">'('</span>:</span><br><span class="line">                <span class="keyword">if</span> base != sys.maxint:</span><br><span class="line">                    base += <span class="number">10</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">elif</span> expression[i] == <span class="string">')'</span>:</span><br><span class="line">                <span class="keyword">if</span> base != sys.maxint:</span><br><span class="line">                    base -= <span class="number">10</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            val = self.get_val(expression[i], base)</span><br><span class="line">    </span><br><span class="line">            node = MyNode(val, expression[i])</span><br><span class="line">            <span class="keyword">while</span> stack <span class="keyword">and</span> val &lt;= stack[-<span class="number">1</span>].val:</span><br><span class="line">                node.left = stack.pop()</span><br><span class="line">            <span class="keyword">if</span> stack:</span><br><span class="line">                stack[-<span class="number">1</span>].right = node</span><br><span class="line">            stack.append(node)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> stack:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        <span class="keyword">return</span> stack[<span class="number">0</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">copy_tree</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        root.exp_node.left = self.copy_tree(root.left)</span><br><span class="line">        root.exp_node.right = self.copy_tree(root.right)</span><br><span class="line">        <span class="keyword">return</span> root.exp_node</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, expression)</span>:</span></span><br><span class="line">        root = self.create_tree(expression)</span><br><span class="line">        <span class="keyword">return</span> self.copy_tree(root)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">dfs</span><span class="params">(self, root, list)</span>:</span></span><br><span class="line">		<span class="keyword">if</span> root == <span class="keyword">None</span>:</span><br><span class="line">			<span class="keyword">return</span></span><br><span class="line">		<span class="keyword">if</span> root.left:</span><br><span class="line">			self.dfs(root.left, list)</span><br><span class="line">		<span class="keyword">if</span> root.right:</span><br><span class="line">			self.dfs(root.right, list)</span><br><span class="line">		list.append(root.symbol)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">convertToRPN</span><span class="params">(self, expression)</span>:</span></span><br><span class="line">        res = []</span><br><span class="line">        root = self.build(expression)</span><br><span class="line">        self.dfs(root, res)</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/08/367-Expression-Tree-Build/" itemprop="url">
                  367 Expression Tree Build
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-09T02:45:50+00:00" content="2015-10-09">
              2015-10-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LintCode/" itemprop="url" rel="index">
                    <span itemprop="name">LintCode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/08/367-Expression-Tree-Build/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/08/367-Expression-Tree-Build/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原题">原题</h1><blockquote>
<p>表达树是一个二叉树的结构，用于衡量特定的表达。所有表达树的叶子都有一个数字字符串值。而所有表达树的非叶子都有另一个操作字符串值。<br>给定一个表达数组，请构造该表达的表达树，并返回该表达树的根。</p>
</blockquote>
<p>对于 <code>(2*6-(23+7)/(1+2))</code> 的表达（可表示为 [“2” “*” “6” “-“ “(“ “23” “+” “7” “)” “/“ “(“ “1” “+” “2” “)”]). 其表达树如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">            [ - ]&#10;         /          \&#10;    [ * ]              [ / ]&#10;  /     \           /         \&#10;[ 2 ]  [ 6 ]      [ + ]        [ + ]&#10;                 /    \       /      \&#10;               [ 23 ][ 7 ] [ 1 ]   [ 2 ]</span><br></pre></td></tr></table></figure></p>
<p>在构造该表达树后，你只需返回根节点[-]。</p>
<h1 id="解题思路">解题思路</h1><ul>
<li>首先定义一个<code>MyTreeNode</code>，对于每一个符号或者数字，附上一个val，以便于之后evaluate它，来建立树</li>
<li>如果<code>expression[i]</code>等于”(“或者”)”调整base然后<code>continue</code>跳过后面的步骤</li>
<li>维护一个递增stack，建立<strong>最小树</strong>，类似题[Max Tree]</li>
<li>最后递归copy已经建立的树，给<code>self.exp_node</code>赋值</li>
</ul>
<h1 id="完整代码">完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span><br><span class="line">Definition of ExpressionTreeNode:</span><br><span class="line">class ExpressionTreeNode:</span><br><span class="line">    def __init__(self, symbol):</span><br><span class="line">        self.symbol = symbol</span><br><span class="line">        self.left, self.right = None, None</span><br><span class="line">"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyTreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, val, s)</span>:</span></span><br><span class="line">        self.left = <span class="keyword">None</span></span><br><span class="line">        self.right = <span class="keyword">None</span></span><br><span class="line">        self.val = val</span><br><span class="line">        self.exp_node = ExpressionTreeNode(s)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># @param expression: A string list</span></span><br><span class="line">    <span class="comment"># @return: The root of expression tree</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_val</span><span class="params">(self, a, base)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> a == <span class="string">'+'</span> <span class="keyword">or</span> a == <span class="string">'-'</span>:</span><br><span class="line">            <span class="keyword">if</span> base == sys.maxint:</span><br><span class="line">                <span class="keyword">return</span> base</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span> + base</span><br><span class="line">        <span class="keyword">if</span> a == <span class="string">'*'</span> <span class="keyword">or</span> a == <span class="string">'/'</span>:</span><br><span class="line">            <span class="keyword">if</span> base == sys.maxint:</span><br><span class="line">                <span class="keyword">return</span> base</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span> + base</span><br><span class="line">        <span class="keyword">return</span> sys.maxint</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_tree</span><span class="params">(self, expression)</span>:</span></span><br><span class="line">        stack = []</span><br><span class="line">        base = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(expression)):</span><br><span class="line">            <span class="keyword">if</span> expression[i] == <span class="string">'('</span>:</span><br><span class="line">                <span class="keyword">if</span> base != sys.maxint:</span><br><span class="line">                    base += <span class="number">10</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">elif</span> expression[i] == <span class="string">')'</span>:</span><br><span class="line">                <span class="keyword">if</span> base != sys.maxint:</span><br><span class="line">                    base -= <span class="number">10</span></span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            val = self.get_val(expression[i], base)</span><br><span class="line">    </span><br><span class="line">            node = MyTreeNode(val, expression[i])</span><br><span class="line">            <span class="keyword">while</span> stack <span class="keyword">and</span> val &lt;= stack[-<span class="number">1</span>].val:</span><br><span class="line">                node.left = stack.pop()</span><br><span class="line">            <span class="keyword">if</span> stack:</span><br><span class="line">                stack[-<span class="number">1</span>].right = node</span><br><span class="line">            stack.append(node)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> stack:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        <span class="keyword">return</span> stack[<span class="number">0</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">copy_tree</span><span class="params">(self, root)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        root.exp_node.left = self.copy_tree(root.left)</span><br><span class="line">        root.exp_node.right = self.copy_tree(root.right)</span><br><span class="line">        <span class="keyword">return</span> root.exp_node</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, expression)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        root = self.create_tree(expression)</span><br><span class="line">        <span class="keyword">return</span> self.copy_tree(root)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/06/364-Trapping-Rain-Water-II/" itemprop="url">
                  364 Trapping Rain Water II
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-07T02:29:19+00:00" content="2015-10-07">
              2015-10-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LintCode/" itemprop="url" rel="index">
                    <span itemprop="name">LintCode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/06/364-Trapping-Rain-Water-II/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/06/364-Trapping-Rain-Water-II/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原题">原题</h1><blockquote>
<p>给出 n <em> m 个非负整数，代表一张X轴上每个区域为 1 \</em> 1 的 2D 海拔图, 计算这个海拔图最多能接住多少（面积）雨水。</p>
</blockquote>
<p>例如，给定一个 5*4 的矩阵：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[12,13,0,12],&#10;[13,4,13,12],&#10;[13,8,10,12],&#10;[12,13,12,12],&#10;[13,13,13,13]</span><br></pre></td></tr></table></figure></p>
<p>返回 14.</p>
<h1 id="解题思路">解题思路</h1><ul>
<li>维护一个最小堆，保存最外面一圈的高度，因为最矮的格子决定了水能存放多少</li>
<li>每次取最小高度 h，与周围4个中没有被访问过的元素进行比较<ul>
<li>如果该元素的高度小于 h，则注水到其中，并将其加入到最小堆中，设置该元素被访问过</li>
<li>如果该元素的高度大于 h，则直接将其加入到最小堆中，设置改元素被访问过</li>
</ul>
</li>
<li>创建一个cell类，封装x, y坐标以及高度h，还有定义compare规则</li>
<li>定义一个<code>dx = [1, -1, 0, 0]</code>和<code>dy = [0, 0, 1, -1]</code>用于生成坐标(x, y)上下左右的点</li>
</ul>
<h1 id="完整代码">完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Queue</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cell</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x, y, h)</span>:</span></span><br><span class="line">        self.x, self.y, self.h = x, y, h</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__cmp__</span><span class="params">(self, other)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.h &lt; other.h:</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> self.h &gt; other.h:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># @param heights: a matrix of integers</span></span><br><span class="line">    <span class="comment"># @return: an integer</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.dx = [<span class="number">1</span>,-<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>]</span><br><span class="line">        self.dy = [<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,-<span class="number">1</span>]</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">trapRainWater</span><span class="params">(self, heights)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(heights) == <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        q = Queue.PriorityQueue()</span><br><span class="line">        n = len(heights)</span><br><span class="line">        m = len(heights[<span class="number">0</span>])</span><br><span class="line">        visit = [[<span class="keyword">False</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(m)] <span class="keyword">for</span> i <span class="keyword">in</span> range(n)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(n):</span><br><span class="line">            q.put(Cell(i, <span class="number">0</span>, heights[i][<span class="number">0</span>]))</span><br><span class="line">            q.put(Cell(i, m-<span class="number">1</span>, heights[i][m-<span class="number">1</span>]))</span><br><span class="line">            visit[i][<span class="number">0</span>] = <span class="keyword">True</span></span><br><span class="line">            visit[i][m-<span class="number">1</span>] = <span class="keyword">True</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(m):</span><br><span class="line">            q.put(Cell(<span class="number">0</span>, i, heights[<span class="number">0</span>][i]))</span><br><span class="line">            q.put(Cell(n-<span class="number">1</span>, i, heights[n-<span class="number">1</span>][i]))</span><br><span class="line">            visit[<span class="number">0</span>][i] = <span class="keyword">True</span></span><br><span class="line">            visit[n-<span class="number">1</span>][i] = <span class="keyword">True</span></span><br><span class="line">            </span><br><span class="line">        ans = <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> <span class="keyword">not</span> q.empty():</span><br><span class="line">            now = q.get()</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">                nx = now.x + self.dx[i]</span><br><span class="line">                ny = now.y + self.dy[i]</span><br><span class="line">                <span class="keyword">if</span> <span class="number">0</span> &lt;= nx <span class="keyword">and</span> nx &lt; n <span class="keyword">and</span> <span class="number">0</span> &lt;= ny <span class="keyword">and</span> ny &lt; m <span class="keyword">and</span> <span class="keyword">not</span> visit[nx][ny]:</span><br><span class="line">                    visit[nx][ny] = <span class="keyword">True</span></span><br><span class="line">                    q.put(Cell(nx, ny, max(now.h,heights[nx][ny])))</span><br><span class="line">                    ans += max(<span class="number">0</span>, now.h - heights[nx][ny])</span><br><span class="line">                    </span><br><span class="line">        <span class="keyword">return</span> ans</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/06/42-Trapping-Rain-Water/" itemprop="url">
                  42 Trapping Rain Water
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-06T19:59:50+00:00" content="2015-10-06">
              2015-10-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LeetCode/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/06/42-Trapping-Rain-Water/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/06/42-Trapping-Rain-Water/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原题">原题</h1><blockquote>
<p>给出 n 个非负整数，代表一张X轴上每个区域宽度为 1 的海拔图, 计算这个海拔图最多能接住多少（面积）雨水。</p>
</blockquote>
<p>海拔分别为 [0,1,0,2,1,0,1,3,2,1,2,1], 返回 6.</p>
<h1 id="解题思路">解题思路</h1><ul>
<li>一块直柱能接的水取决于左右两边较短的高度，所以第一个比较直观的方法是从左到有遍历一遍记录该点左边的最大值，从右到左遍历一遍记录该点的右边的最大值，此方法为O(n) 时间, O(n) 空间，第二种方法可以利用<strong>单调递减栈</strong>来实现，此方法为O(n) 时间, O(n) 空间</li>
<li>第三种方法为先找出中间最大点，然后左边部分相当于已经确定了右边最大值，左指针不断向右逼近就行，右边部分相当于记录了左边最大值，右指针不断向左逼近就行，此方法为O(n) 时间, O(1) 空间，第四种方法类似第三种，左右夹逼，每次选择小的那个指针向中间靠拢，此方法为O(n) 时间, O(1) 空间，但是要比方法三少遍历一遍。</li>
</ul>
<h1 id="完整代码">完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法三</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># @param heights: a list of integers</span></span><br><span class="line">    <span class="comment"># @return: a integer</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">trapRainWater</span><span class="params">(self, heights)</span>:</span></span><br><span class="line">        water = <span class="number">0</span></span><br><span class="line">        MaxIndex = -<span class="number">1</span></span><br><span class="line">        MaxHeight = -<span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(heights)):</span><br><span class="line">            <span class="keyword">if</span> heights[i] &gt; MaxHeight:</span><br><span class="line">                MaxHeight = heights[i]</span><br><span class="line">                MaxIndex = i</span><br><span class="line">                </span><br><span class="line">        prev = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, MaxIndex):</span><br><span class="line">            <span class="keyword">if</span> heights[i] &gt; prev:</span><br><span class="line">                water += (heights[i] - prev) * (MaxIndex - i)</span><br><span class="line">                prev = heights[i]</span><br><span class="line">            water -= heights[i]</span><br><span class="line">            </span><br><span class="line">        prev = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(heights) - <span class="number">1</span>, MaxIndex, -<span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> heights[i] &gt; prev:</span><br><span class="line">                water += (heights[i] - prev) * (i - MaxIndex)</span><br><span class="line">                prev = heights[i]</span><br><span class="line">            water -= heights[i]</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">return</span> water</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法四</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># @param heights: a list of integers</span></span><br><span class="line">    <span class="comment"># @return: a integer</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">trapRainWater</span><span class="params">(self, heights)</span>:</span></span><br><span class="line">        n = len(heights)</span><br><span class="line">        l, r, water, minHeight = <span class="number">0</span>, n - <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">while</span> l &lt; r:</span><br><span class="line">            <span class="keyword">while</span> l &lt; r <span class="keyword">and</span> heights[l] &lt;= minHeight:</span><br><span class="line">                water += minHeight - heights[l]</span><br><span class="line">                l += <span class="number">1</span></span><br><span class="line">            <span class="keyword">while</span> l &lt; r <span class="keyword">and</span> heights[r] &lt;= minHeight:</span><br><span class="line">                water += minHeight - heights[r]</span><br><span class="line">                r -= <span class="number">1</span></span><br><span class="line">            minHeight = min(heights[l], heights[r])</span><br><span class="line">        <span class="keyword">return</span> water</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/05/207-Interval-Sum-II/" itemprop="url">
                  207 Interval Sum II
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-06T01:05:37+00:00" content="2015-10-06">
              2015-10-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LintCode/" itemprop="url" rel="index">
                    <span itemprop="name">LintCode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/05/207-Interval-Sum-II/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/05/207-Interval-Sum-II/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原题">原题</h1><blockquote>
<p>在类的构造函数中给一个整数数组, 实现两个方法 query(start, end) 和 modify(index, value):<br>对于 query(start, end), 返回数组中下标 start 到 end 的和。<br>对于 modify(index, value), 修改数组中下标为 index 上的数为 value.</p>
</blockquote>
<p>给定数组 A = [1,2,7,8,5].<br>query(0, 2), 返回 10.<br>modify(0, 4), 将 A[0] 修改为 4.<br>query(0, 1), 返回 6.<br>modify(2, 1), 将 A[2] 修改为 1.<br>query(2, 4), 返回 14.</p>
<h1 id="解题思路">解题思路</h1><ul>
<li>同[Interval Sum I]的思路一样，只是做成了Interval Sum类，实现API</li>
<li>分别定义了<code>build</code>, <code>queryHelper</code>, <code>modifyHelper</code>三个helper函数，相应的API接口调用helper函数</li>
</ul>
<h1 id="完整代码">完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">segmentTreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start, end, Sum)</span>:</span></span><br><span class="line">        self.start, self.end, self.Sum = start, end, Sum</span><br><span class="line">        self.left, self.right = <span class="keyword">None</span>, <span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span>	</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># @param A: An integer list</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, A)</span>:</span></span><br><span class="line">        self.root = self.build(A, <span class="number">0</span>, len(A) - <span class="number">1</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, L, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start &gt; end:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">            </span><br><span class="line">        root = segmentTreeNode(start, end, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> start != end:</span><br><span class="line">            mid = (start + end) / <span class="number">2</span></span><br><span class="line">            root.left = self.build(L, start, mid)</span><br><span class="line">            root.right = self.build(L, mid + <span class="number">1</span>, end)</span><br><span class="line">            root.Sum = root.left.Sum + root.right.Sum</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            root.Sum = L[start]</span><br><span class="line">        <span class="keyword">return</span> root    </span><br><span class="line"></span><br><span class="line">    <span class="comment"># @param start, end: Indices</span></span><br><span class="line">    <span class="comment"># @return: The sum from start to end</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> self.queryHelper(self.root, start, end)</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">queryHelper</span><span class="params">(self, root, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == start <span class="keyword">and</span> root.end == end:</span><br><span class="line">            <span class="keyword">return</span> root.Sum</span><br><span class="line">            </span><br><span class="line">        mid = root.start + (root.end - root.start) / <span class="number">2</span></span><br><span class="line">        leftSum, rightSum = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> start &lt;= mid:</span><br><span class="line">            <span class="keyword">if</span> mid &lt; end:</span><br><span class="line">                leftSum = self.queryHelper(root.left, start, mid)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                leftSum = self.queryHelper(root.left, start, end)</span><br><span class="line">        <span class="keyword">if</span> mid &lt; end:</span><br><span class="line">            <span class="keyword">if</span> start &lt;= mid:</span><br><span class="line">                rightSum = self.queryHelper(root.right, mid + <span class="number">1</span>, end)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                rightSum = self.queryHelper(root.right, start, end)</span><br><span class="line">        <span class="keyword">return</span> leftSum + rightSum</span><br><span class="line"></span><br><span class="line">    <span class="comment"># @param index, value: modify A[index] to value.</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">modify</span><span class="params">(self, index, value)</span>:</span></span><br><span class="line">        self.modifyHelper(self.root, index, value)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">modifyHelper</span><span class="params">(self, root, index, value)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == index <span class="keyword">and</span> root.end == index:</span><br><span class="line">            root.Sum = value</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">            </span><br><span class="line">        mid = root.start + (root.end - root.start) / <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> root.start &lt;= index <span class="keyword">and</span> index &lt;= mid:</span><br><span class="line">            self.modifyHelper(root.left, index, value)</span><br><span class="line">        <span class="keyword">if</span> mid &lt; index <span class="keyword">and</span> index &lt;= root.end:</span><br><span class="line">            self.modifyHelper(root.right, index, value)</span><br><span class="line">        root.Sum =  root.left.Sum + root.right.Sum</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/05/206-Interval-Sum-I/" itemprop="url">
                  206 Interval Sum I
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-06T00:50:23+00:00" content="2015-10-06">
              2015-10-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LintCode/" itemprop="url" rel="index">
                    <span itemprop="name">LintCode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/05/206-Interval-Sum-I/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/05/206-Interval-Sum-I/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原题">原题</h1><blockquote>
<p>给定一个整数数组（下标由 0 到 n-1，其中 n 表示数组的规模），以及一个查询列表。每一个查询列表有两个整数 [start, end] 。 对于每个查询，计算出数组中从下标 start 到 end 之间的数的总和，并返回在结果列表中。</p>
</blockquote>
<p>对于数组 [1,2,7,8,5]，查询[(1,2),(0,4),(2,4)], 返回 [9,23,20]</p>
<h1 id="解题思路">解题思路</h1><ul>
<li>建立<strong>下标型线段树</strong>， 自下而上，回溯更新</li>
<li><code>root.sum = root.left.sum + root.right.sum</code></li>
<li>for循环query更新结果</li>
</ul>
<h1 id="完整代码">完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span><br><span class="line">Definition of Interval.</span><br><span class="line">class Interval(object):</span><br><span class="line">    def __init__(self, start, end):</span><br><span class="line">        self.start = start</span><br><span class="line">        self.end = end</span><br><span class="line">"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">segmentTreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start, end, Sum)</span>:</span></span><br><span class="line">        self.start, self.end, self.Sum = start, end, Sum</span><br><span class="line">        self.left, self.right = <span class="keyword">None</span>, <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span>	</span><br><span class="line">    <span class="string">"""</span><br><span class="line">    @param A, queries: Given an integer array and an Interval list</span><br><span class="line">                       The ith query is [queries[i-1].start, queries[i-1].end]</span><br><span class="line">    @return: The result list</span><br><span class="line">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, L, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start &gt; end:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">            </span><br><span class="line">        root = segmentTreeNode(start, end, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> start != end:</span><br><span class="line">            mid = (start + end) / <span class="number">2</span></span><br><span class="line">            root.left = self.build(L, start, mid)</span><br><span class="line">            root.right = self.build(L, mid + <span class="number">1</span>, end)</span><br><span class="line">            root.Sum = root.left.Sum + root.right.Sum</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            root.Sum = L[start]</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, root, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == start <span class="keyword">and</span> root.end == end:</span><br><span class="line">            <span class="keyword">return</span> root.Sum</span><br><span class="line">            </span><br><span class="line">        mid = root.start + (root.end - root.start) / <span class="number">2</span></span><br><span class="line">        leftSum, rightSum = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> start &lt;= mid:</span><br><span class="line">            <span class="keyword">if</span> mid &lt; end:</span><br><span class="line">                leftSum = self.query(root.left, start, mid)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                leftSum = self.query(root.left, start, end)</span><br><span class="line">        <span class="keyword">if</span> mid &lt; end:</span><br><span class="line">            <span class="keyword">if</span> start &lt;= mid:</span><br><span class="line">                rightSum = self.query(root.right, mid + <span class="number">1</span>, end)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                rightSum = self.query(root.right, start, end)</span><br><span class="line">        <span class="keyword">return</span> leftSum + rightSum</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">intervalSum</span><span class="params">(self, A, queries)</span>:</span></span><br><span class="line">        root = self.build(A, <span class="number">0</span>, len(A) - <span class="number">1</span>)</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> q <span class="keyword">in</span> queries:</span><br><span class="line">            res.append(self.query(root, q.start, q.end))</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/05/249-Count-the-Smaller-Number-Before-Itself/" itemprop="url">
                  249 Count the Smaller Number Before Itself
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-05T21:56:10+00:00" content="2015-10-05">
              2015-10-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LintCode/" itemprop="url" rel="index">
                    <span itemprop="name">LintCode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/05/249-Count-the-Smaller-Number-Before-Itself/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/05/249-Count-the-Smaller-Number-Before-Itself/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原题">原题</h1><blockquote>
<p>给定一个整数数组（下标由 0 到 n-1， n 表示数组的规模，取值范围由 0 到10000）。对于数组中的每个 ai 元素，请计算 ai 前的数中比它小的元素的数量。</p>
</blockquote>
<p>对于数组[1,2,7,8,5] ，返回 [0,1,2,3,2]</p>
<h1 id="解题思路">解题思路</h1><ul>
<li>建立<strong>值型线段树</strong></li>
<li>首先建立树count都等于0，然后循环query再modify</li>
<li>注意查找x-1可能出现负值，要做判断，x-1 &lt; 0直接<code>res.append(0)</code></li>
</ul>
<h1 id="完整代码">完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">segmentTreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start, end, count)</span>:</span></span><br><span class="line">        self.start, self.end, self.count = start, end, count</span><br><span class="line">        self.left, self.right = <span class="keyword">None</span>, <span class="keyword">None</span></span><br><span class="line">  </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span><br><span class="line">    @param A: A list of integer</span><br><span class="line">    @return: Count the number of element before this element 'ai' is </span><br><span class="line">             smaller than it and return count number list</span><br><span class="line">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start == end:</span><br><span class="line">            root = segmentTreeNode(start, end, <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line">            </span><br><span class="line">        root = segmentTreeNode(start, end, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> start != end:</span><br><span class="line">            mid = (start + end) / <span class="number">2</span></span><br><span class="line">            root.left = self.build(start, mid)</span><br><span class="line">            root.right = self.build(mid + <span class="number">1</span>, end)</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, root, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == start <span class="keyword">and</span> root.end == end:</span><br><span class="line">            <span class="keyword">return</span> root.count</span><br><span class="line">            </span><br><span class="line">        mid = root.start + (root.end - root.start) / <span class="number">2</span></span><br><span class="line">        leftCount, rightCount = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> start &lt;= mid:</span><br><span class="line">            <span class="keyword">if</span> mid &lt; end:</span><br><span class="line">                leftCount = self.query(root.left, start, mid)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                leftCount = self.query(root.left, start, end)</span><br><span class="line">        <span class="keyword">if</span> mid &lt; end:</span><br><span class="line">            <span class="keyword">if</span> start &lt;= mid:</span><br><span class="line">                rightCount = self.query(root.right, mid + <span class="number">1</span>, end)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                rightCount = self.query(root.right, start, end)</span><br><span class="line">        <span class="keyword">return</span> leftCount + rightCount</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">modify</span><span class="params">(self, root, index, value)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == index <span class="keyword">and</span> root.end == index:</span><br><span class="line">            root.count += value</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        mid = root.start + (root.end - root.start) / <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> root.start &lt;= index <span class="keyword">and</span> index &lt;= mid:</span><br><span class="line">            self.modify(root.left, index, value)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> mid &lt; index <span class="keyword">and</span> index &lt;= root.end:</span><br><span class="line">            self.modify(root.right, index, value)</span><br><span class="line">        </span><br><span class="line">        root.count = root.left.count + root.right.count</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countOfSmallerNumberII</span><span class="params">(self, A)</span>:</span></span><br><span class="line">        root = self.build(<span class="number">0</span>, <span class="number">10000</span>)</span><br><span class="line">        </span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> A:</span><br><span class="line">            ans = <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> num &gt; <span class="number">0</span>:</span><br><span class="line">                ans = self.query(root, <span class="number">0</span>, num - <span class="number">1</span>)</span><br><span class="line">            self.modify(root, num, <span class="number">1</span>)</span><br><span class="line">            res.append(ans)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/05/248-Count-the-Smaller-Number/" itemprop="url">
                  248 Count the Smaller Number
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-05T21:51:06+00:00" content="2015-10-05">
              2015-10-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LintCode/" itemprop="url" rel="index">
                    <span itemprop="name">LintCode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/05/248-Count-the-Smaller-Number/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/05/248-Count-the-Smaller-Number/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原题">原题</h1><blockquote>
<p>给定一个整数数组 （下标由 0 到 n-1，其中 n 表示数组的规模，数值范围由 0 到 10000），以及一个 查询列表。对于每一个查询，将会给你一个整数，请你返回该数组中小于给定整数的元素的数量。</p>
</blockquote>
<p>对于数组 [1,2,7,8,5] ，查询 [1,8,5]，返回 [0,4,2]</p>
<h1 id="解题思路">解题思路</h1><ul>
<li>方法一，将数组快速排序，然后对于某个数x，二分查找最后一个x-1的位置</li>
<li>方法二，建立<strong>值型线段树</strong></li>
<li>对于方法二要注意查找x-1可能出现负值，要做判断，x-1 &lt; 0直接<code>res.append(0)</code></li>
</ul>
<h1 id="完整代码">完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法一</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span><br><span class="line">    @param A: A list of integer</span><br><span class="line">    @return: The number of element in the array that </span><br><span class="line">             are smaller that the given integer</span><br><span class="line">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countOfSmallerNumber</span><span class="params">(self, A, queries)</span>:</span></span><br><span class="line">        A.sort()</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> q <span class="keyword">in</span> queries:</span><br><span class="line">            res.append(self.SmallerNumber(A, q))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">SmallerNumber</span><span class="params">(self, L, num)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> len(L) == <span class="number">0</span> <span class="keyword">or</span> L[-<span class="number">1</span>] &lt; num:</span><br><span class="line">            <span class="keyword">return</span> len(L)</span><br><span class="line">            </span><br><span class="line">        start, end = <span class="number">0</span>, len(L) - <span class="number">1</span></span><br><span class="line">        <span class="keyword">while</span> start + <span class="number">1</span> &lt; end:</span><br><span class="line">            mid = start + (end - start) / <span class="number">2</span></span><br><span class="line">            <span class="keyword">if</span> L[mid] &gt;= num:</span><br><span class="line">                end = mid</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                start = mid</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> L[start] &gt;= num:</span><br><span class="line">            <span class="keyword">return</span> start</span><br><span class="line">        <span class="keyword">if</span> L[end] &gt;= num:</span><br><span class="line">            <span class="keyword">return</span> end</span><br><span class="line"></span><br><span class="line"><span class="comment"># 方法二</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">segmentTreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start, end, count)</span>:</span></span><br><span class="line">        self.start, self.end, self.count = start, end, count</span><br><span class="line">        self.left, self.right = <span class="keyword">None</span>, <span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="string">"""</span><br><span class="line">    @param A: A list of integer</span><br><span class="line">    @return: The number of element in the array that </span><br><span class="line">             are smaller that the given integer</span><br><span class="line">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start == end:</span><br><span class="line">            root = segmentTreeNode(start, end, <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line">            </span><br><span class="line">        root = segmentTreeNode(start, end, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> start != end:</span><br><span class="line">            mid = (start + end) / <span class="number">2</span></span><br><span class="line">            root.left = self.build(start, mid)</span><br><span class="line">            root.right = self.build(mid + <span class="number">1</span>, end)</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, root, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == start <span class="keyword">and</span> root.end == end:</span><br><span class="line">            <span class="keyword">return</span> root.count</span><br><span class="line">            </span><br><span class="line">        mid = root.start + (root.end - root.start) / <span class="number">2</span></span><br><span class="line">        leftCount, rightCount = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">        <span class="keyword">if</span> start &lt;= mid:</span><br><span class="line">            <span class="keyword">if</span> mid &lt; end:</span><br><span class="line">                leftCount = self.query(root.left, start, mid)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                leftCount = self.query(root.left, start, end)</span><br><span class="line">        <span class="keyword">if</span> mid &lt; end:</span><br><span class="line">            <span class="keyword">if</span> start &lt;= mid:</span><br><span class="line">                rightCount = self.query(root.right, mid + <span class="number">1</span>, end)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                rightCount = self.query(root.right, start, end)</span><br><span class="line">        <span class="keyword">return</span> leftCount + rightCount</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">modify</span><span class="params">(self, root, index, value)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == index <span class="keyword">and</span> root.end == index:</span><br><span class="line">            root.count += value</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        </span><br><span class="line">        mid = root.start + (root.end - root.start) / <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> root.start &lt;= index <span class="keyword">and</span> index &lt;= mid:</span><br><span class="line">            self.modify(root.left, index, value)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> mid &lt; index <span class="keyword">and</span> index &lt;= root.end:</span><br><span class="line">            self.modify(root.right, index, value)</span><br><span class="line">        </span><br><span class="line">        root.count = root.left.count + root.right.count</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">countOfSmallerNumber</span><span class="params">(self, A, queries)</span>:</span></span><br><span class="line">        root = self.build(<span class="number">0</span>, <span class="number">1000</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> num <span class="keyword">in</span> A:</span><br><span class="line">            self.modify(root, num, <span class="number">1</span>)</span><br><span class="line">            </span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> q <span class="keyword">in</span> queries:</span><br><span class="line">            ans = <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> q &gt; <span class="number">0</span>:</span><br><span class="line">                ans = self.query(root, <span class="number">0</span>, q - <span class="number">1</span>)</span><br><span class="line">            res.append(ans)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/04/205-Interval-Minimum-Number/" itemprop="url">
                  205 Interval Minimum Number
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-05T02:33:46+00:00" content="2015-10-05">
              2015-10-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LintCode/" itemprop="url" rel="index">
                    <span itemprop="name">LintCode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/04/205-Interval-Minimum-Number/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/04/205-Interval-Minimum-Number/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原题">原题</h1><blockquote>
<p>给定一个整数数组（下标由 0 到 n-1，其中 n 表示数组的规模），以及一个查询列表。每一个查询列表有两个整数 [start, end]。 对于每个查询，计算出数组中从下标 start 到 end 之间的数的最小值，并返回在结果列表中。</p>
</blockquote>
<p>对于数组 [1,2,7,8,5]， 查询 [(1,2),(0,4),(2,4)]，返回 [2,1,5]</p>
<h1 id="解题思路">解题思路</h1><ul>
<li>使用线段树，典型例题</li>
<li>首先构造node类，实现Query和Build</li>
</ul>
<h1 id="完整代码">完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span><br><span class="line">Definition of Interval.</span><br><span class="line">class Interval(object):</span><br><span class="line">    def __init__(self, start, end):</span><br><span class="line">        self.start = start</span><br><span class="line">        self.end = end</span><br><span class="line">"""</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">segmentTreeNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, start, end, min)</span>:</span></span><br><span class="line">        self.start, self.end, self.min = start, end, min</span><br><span class="line">        self.left, self.right = <span class="keyword">None</span>, <span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span>	</span><br><span class="line">    <span class="string">"""</span><br><span class="line">    @param A, queries: Given an integer array and an Interval list</span><br><span class="line">                       The ith query is [queries[i-1].start, queries[i-1].end]</span><br><span class="line">    @return: The result list</span><br><span class="line">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self, A)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> A:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> self.helper(A, <span class="number">0</span>, len(A) - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">helper</span><span class="params">(self, L, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start == end:</span><br><span class="line">            root = segmentTreeNode(start, end, L[start])</span><br><span class="line">            <span class="keyword">return</span> root</span><br><span class="line">            </span><br><span class="line">        root = segmentTreeNode(start, end, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> start != end:</span><br><span class="line">            mid = (start + end) / <span class="number">2</span></span><br><span class="line">            root.left = self.helper(L, start, mid)</span><br><span class="line">            root.right = self.helper(L, mid + <span class="number">1</span>, end)</span><br><span class="line">        root.min = min(root.left.min, root.right.min)</span><br><span class="line">        <span class="keyword">return</span> root</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">query</span><span class="params">(self, root, start, end)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> start &gt; end <span class="keyword">or</span> root == <span class="keyword">None</span>:</span><br><span class="line">            <span class="keyword">return</span> sys.maxint</span><br><span class="line">            </span><br><span class="line">        <span class="keyword">if</span> root.start &gt;= start <span class="keyword">and</span> root.end &lt;= end:</span><br><span class="line">            <span class="keyword">return</span> root.min</span><br><span class="line">            </span><br><span class="line">        mid = root.start + (root.end - root.start) / <span class="number">2</span></span><br><span class="line">        leftMin, rightMin = sys.maxint, sys.maxint</span><br><span class="line">        <span class="keyword">if</span> start &lt;= mid:</span><br><span class="line">            <span class="keyword">if</span> mid &lt; end:</span><br><span class="line">                leftMin = self.query(root.left, start, mid)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                leftMin = self.query(root.left, start, end)</span><br><span class="line">        <span class="keyword">if</span> mid &lt; end:</span><br><span class="line">            <span class="keyword">if</span> start &lt;= mid:</span><br><span class="line">                rightMin = self.query(root.right, mid + <span class="number">1</span>, end)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                rightMin = self.query(root.right, start, end)</span><br><span class="line">        <span class="keyword">return</span> min(leftMin, rightMin)</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">intervalMinNumber</span><span class="params">(self, A, queries)</span>:</span></span><br><span class="line">        <span class="comment"># write your code here</span></span><br><span class="line">        root = self.build(A)</span><br><span class="line">        res = []</span><br><span class="line">        <span class="keyword">for</span> q <span class="keyword">in</span> queries:</span><br><span class="line">            res.append(self.query(root, q.start, q.end))</span><br><span class="line">        <span class="keyword">return</span> res</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/10/04/203-Segment-Tree-Modify/" itemprop="url">
                  203 Segment Tree Modify
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-10-05T02:09:54+00:00" content="2015-10-05">
              2015-10-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/LintCode/" itemprop="url" rel="index">
                    <span itemprop="name">LintCode</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/04/203-Segment-Tree-Modify/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2015/10/04/203-Segment-Tree-Modify/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="原题">原题</h1><blockquote>
<p>对于一棵 最大线段树, 每个节点包含一个额外的 max 属性，用于存储该节点所代表区间的最大值。<br>设计一个 modify 的方法，接受三个参数 root、 index 和 value。该方法将 root 为跟的线段树中 [start, end] = [index, index] 的节点修改为了新的 value ，并确保在修改后，线段树的每个节点的 max 属性仍然具有正确的值。</p>
</blockquote>
<p>对于线段树:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">                      [<span class="number">1</span>, <span class="number">4</span>, max=<span class="number">3</span>]</span><br><span class="line">                    /                \</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, max=<span class="number">2</span>]                [<span class="number">3</span>, <span class="number">4</span>, max=<span class="number">3</span>]</span><br><span class="line">       /              \             /             \</span><br><span class="line">[<span class="number">1</span>, <span class="number">1</span>, max=<span class="number">2</span>], [<span class="number">2</span>, <span class="number">2</span>, max=<span class="number">1</span>], [<span class="number">3</span>, <span class="number">3</span>, max=<span class="number">0</span>], [<span class="number">4</span>, <span class="number">4</span>, max=<span class="number">3</span>]</span><br></pre></td></tr></table></figure></p>
<p>如果调用 modify(root, 2, 4), 返回:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">                      [<span class="number">1</span>, <span class="number">4</span>, max=<span class="number">4</span>]</span><br><span class="line">                    /                \</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, max=<span class="number">4</span>]                [<span class="number">3</span>, <span class="number">4</span>, max=<span class="number">3</span>]</span><br><span class="line">       /              \             /             \</span><br><span class="line">[<span class="number">1</span>, <span class="number">1</span>, max=<span class="number">2</span>], [<span class="number">2</span>, <span class="number">2</span>, max=<span class="number">4</span>], [<span class="number">3</span>, <span class="number">3</span>, max=<span class="number">0</span>], [<span class="number">4</span>, <span class="number">4</span>, max=<span class="number">3</span>]</span><br></pre></td></tr></table></figure></p>
<p>或 调用 modify(root, 4, 0), 返回:<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">                     [<span class="number">1</span>, <span class="number">4</span>, max=<span class="number">2</span>]</span><br><span class="line">                    /                \</span><br><span class="line">        [<span class="number">1</span>, <span class="number">2</span>, max=<span class="number">2</span>]                [<span class="number">3</span>, <span class="number">4</span>, max=<span class="number">0</span>]</span><br><span class="line">       /              \             /             \</span><br><span class="line">[<span class="number">1</span>, <span class="number">1</span>, max=<span class="number">2</span>], [<span class="number">2</span>, <span class="number">2</span>, max=<span class="number">1</span>], [<span class="number">3</span>, <span class="number">3</span>, max=<span class="number">0</span>], [<span class="number">4</span>, <span class="number">4</span>, max=<span class="number">0</span>]</span><br></pre></td></tr></table></figure></p>
<h1 id="解题思路">解题思路</h1><ul>
<li>自上而下，递归查找</li>
<li>自下而上，回溯更新</li>
</ul>
<h1 id="完整代码">完整代码</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"""</span><br><span class="line">Definition of SegmentTreeNode:</span><br><span class="line">class SegmentTreeNode:</span><br><span class="line">    def __init__(self, start, end, max):</span><br><span class="line">        self.start, self.end, self.max = start, end, max</span><br><span class="line">        self.left, self.right = None, None</span><br><span class="line">"""</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span>	</span><br><span class="line">    <span class="string">"""</span><br><span class="line">    @param root, index, value: The root of segment tree and </span><br><span class="line">    @ change the node's value with [index, index] to the new given value</span><br><span class="line">    @return: nothing</span><br><span class="line">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">modify</span><span class="params">(self, root, index, value)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> root.start == index <span class="keyword">and</span> root.end == index:</span><br><span class="line">            root.max = value</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">            </span><br><span class="line">        mid = (root.start + root.end) / <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span> root.start &lt;= index <span class="keyword">and</span> index &lt;= mid:</span><br><span class="line">            self.modify(root.left, index, value)</span><br><span class="line">        <span class="keyword">elif</span> mid &lt; index <span class="keyword">and</span> index &lt;= root.end:</span><br><span class="line">            self.modify(root.right, index, value)</span><br><span class="line">        root.max = max(root.left.max, root.right.max)</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/6/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/8/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="Jason Yuan" />
          <p class="site-author-name" itemprop="name">Jason Yuan</p>
          <p class="site-description motion-element" itemprop="description">WORK HARD, PLAY HARD</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">126</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">82</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Jason-Yuan" target="_blank">
                  
                    <i class="fa fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/yuanbo0109" target="_blank">
                  
                    <i class="fa fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/boyuan1" target="_blank">
                  
                    <i class="fa fa-linkedin"></i>
                  
                  LinkedIn
                </a>
              </span>
            
          
        </div>

        
        

        
        <div class="links-of-blogroll motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jason Yuan</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>





      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  

    <script type="text/javascript">
      var disqus_shortname = 'boyuan0109';
      var disqus_identifier = 'page/7/index.html';
      var disqus_title = '';
      var disqus_url = '';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
    </script>
  



  
  
  
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
  </script>

  <script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  </script>
  <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


  

  

</body>
</html>
